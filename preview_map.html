<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Buncombe Logistic Risk Preview</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <style>
    html, body, #map { height: 100%; margin: 0; }
  </style>
</head>
<body>
<div id="map"></div>
<script>
  const map = L.map('map').setView([35.6, -82.5], 10);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);
  fetch('predictions/2025-10-17/predictions.geojson')
    .then(r => r.json())
    .then(data => {
      L.geoJSON(data, {
        pointToLayer: (f, latlng) => L.circleMarker(latlng, {
          radius: 3,
          fillColor: getColor(f.properties.p_logistic),
          color: '#000',
          weight: 0.3,
          opacity: 0.7,
          fillOpacity: 0.8
        }).bindPopup('p_logistic: ' + f.properties.p_logistic.toFixed(3))
      }).addTo(map);
    });

  function getColor(p) {
    return p > 0.6 ? '#b2182b' :   // red: high
         p > 0.55 ? '#ef8a62' :
         p > 0.5  ? '#fddbc7' :
         p > 0.45 ? '#d1e5f0' :
         p > 0.4  ? '#67a9cf' :  // blue: low
                    '#2166ac';
  }
</script>
</body>
</html>
